\documentclass[12pt]{article}
\usepackage{fullpage,enumitem,amsmath,amssymb,graphicx}

\begin{document}

\begin{center}
{\Large CS221 Fall 2018 Homework [blackjack]}

\begin{tabular}{rl}
SUNet ID: & prabhjot \\
Name: & Prabhjot Singh Rai
\end{tabular}
\end{center}

By turning in this assignment, I agree by the Stanford honor code and declare
that all of this is my own work.

\section*{Problem 1}

\begin{enumerate}[label=(\alph*)]
  \item 
  The equation $V_{opt}$  is given by: \\
  \begin{align*}
  V_{opt} = \begin{cases} 
  0 & \text{if $endState$} \\
  max_{\text{a } \epsilon \text{ actions}} Q_{opt}(s, a) & \text{otherwise}
  \end{cases}
  \end{align*}
  where,
  $$Q_{opt}(s, a) = \sum_{s'} T(s, a, s')[\text{Reward}(s, a, s') + \gamma V_{opt}(s')]$$
  \textbf{Iteration 1} \\
  As per the question, $V$ is assigned values of $0$. Therefore,
  $$V_{opt} = \{-2: 0, -1: 0, 0: 0, 1: 0, 2: 0\}$$
 \textbf{Iteration 2}
 \begin{enumerate}
 	\item State $0$ \\
 	\begin{enumerate}
 		\item Action $+1$ \\
 		\begin{align*}
 		Q_{opt} &= 0.3 * [-5 + 0] + 0.7 * [-5 + 0] \\
 		&= -5
 		\end{align*}
 		\item Action $-1$ \\
 		\begin{align*}
 		Q_{opt} &= 0.8 [-5 + 0] + 0.2 * [-5 + 0] \\
 		&= -5
 		\end{align*}
 	\end{enumerate}
 	Therefore, $V_{opt}^1(0) = -5$
 	\item State $1$ \\
 	\begin{enumerate}
 		\item Action $+1$
 		\begin{align*}
 		Q_{opt} &= 0.3 * [100 + 0] + 0.7 * [-5 + 0] \\
 		&= 26.5
 		\end{align*}
 		\item Action $-1$
 		\begin{align*}
 		Q_{opt} &= 0.8 * [-5 + 0] + 0.2 * [100 + 0] \\
 		&= 16
 		\end{align*}
 	\end{enumerate}
 	Therefore, $V_{opt}^1(1) = 26.5$
 	\item State $-1$ \\
 	\begin{enumerate}
 		\item Action $+1$
 		\begin{align*}
 		Q_{opt} &= 0.3 * [-5 + 0] + 0.7 * [20 + 0] \\
 		&= 12.5
 		\end{align*}
 		\item Action $-1$
 		\begin{align*}
 		Q_{opt} &= 0.8 * [20] + 0.2 * [-5] \\
 		&= 15
 		\end{align*}
 		Therefore, $V_{opt}^1(-1) = 15$
 	\end{enumerate}
 	\item State $2$, since it's an end state $V_{opt}^1(2) = 0$
 	\item State $-2$, since it's an end state $V_{opt}^1(-2) = 0$
 \end{enumerate}
 Therefore,
 $$V_{opt}^1 = \{ -2:0, -1: 15, 0: -5, 1: 26.5, 2:0 \}$$
 \textbf{Iteration 3}
 \begin{enumerate}
 \item State $0$
 \begin{enumerate}
	\item Action $+1$
	 \begin{align*}
	 Q_{opt} &= 0.3 * [-5 + 26.5] + 0.7 * [-5 + 15] \\
	 &= 6.45 + 7 \\
	 &= 13.45
	 \end{align*} 
	 \item Action $-1$
	 \begin{align*}
	 Q_{opt} &= 0.8 * [-5 + 15] + 0.2 * [-5 + 26.5] \\
	 &= 8 + 4.3 \\
	 &= 12.3
	 \end{align*}
 \end{enumerate}
 Therefore, $V_{opt}^2(0) = 13.45$
 \item State $1$
	\begin{enumerate}
		\item Action $+1$ \\
			\begin{align*}
				Q_{opt} &= 0.3 * [100 + 0] + 0.7 * [-5 + -5] \\
				&= 30 - 7 \\
				&= 23
			\end{align*}
		\item Action $-1$ \\
			\begin{align*}
				Q_{opt} &= 0.8 * [-5 + -5] + 0.2 * [100 + 0] \\
				&= -8 + 20 \\
				&= 12
			\end{align*}
	\end{enumerate}
	Therefore, $V_{opt}^2(1) = 23$
\item State $-1$
	\begin{enumerate}
		\item Action $+1$
			\begin{align*}
				Q_{opt} &= 0.3 * [-5 + -5] + 0.7 * [20] \\
				&= -3 + 14 \\
				&= 9
			\end{align*}
		\item Action $-1$
			\begin{align*}
				Q_{opt} &= 0.8 * [20] + 0.2 * [-5 + -5] \\
				&= 16 - 2 \\
				&= 14
			\end{align*}
	\end{enumerate}
	Therefore, $V_{opt}^2(-1) = 14$
 \end{enumerate}
 Therefore, $$V_{opt}^2 = \{ -2: 0, -1: 14, 0: 13.45, 1: 23, 2: 0\}$$
  \item From the solution in $1a$, the different [Action, $Q_{opt}(s,a)$] after iteration 2 for
  	\begin{enumerate}
  		\item State $0$ = $[+1, 13.45] [-1, 12.3]$, therefore, $\pi_{opt}(0) = +1$
  		\item State $1$ = $[+1, 23] [-1, 12]$, therefore, $\pi_{opt}(1) = +1$
  		\item State $-1$ = $[+1, 9] [-1, 14]$, therefore, $\pi_{opt}(-1) = -1$
  	\end{enumerate}
  	Therefore, $$\pi_{opt}(s) = \{ -1: -1, 0: +1, 1: +1 \}$$
\end{enumerate}

\section*{Problem 2}

\begin{enumerate}[label=(\alph*)]
  \item (your solution)
  \item (your solution)
\end{enumerate}

\end{document}